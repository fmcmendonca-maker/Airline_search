<script>
async function searchAirline() {
  const query = document.getElementById("airlineInput").value.trim();
  const output = document.getElementById("output");
  output.innerHTML = "Searching...";

  if (!query) {
    output.innerHTML = "Please enter airline name, IATA, or ICAO.";
    return;
  }

  // Decide what type of query
  let param = "";
  if (query.length === 2) param = "iata";   // Example: LH
  else if (query.length === 3) param = "icao"; // Example: DLH
  else param = "name"; // Example: Lufthansa

  const url = `https://airline-search-h4y0.onrender.com/airline?${param}=${encodeURIComponent(query)}`;

  try {
    const response = await fetch(url);
    const data = await response.json();

    if (data.error || !data.name) {
      output.innerHTML = "No airline found.";
      return;
    }

    // Build output
    output.innerHTML = `
      <h2>${data.name}</h2>
      <p><strong>IATA:</strong> ${data.iata || "-"}</p>
      <p><strong>ICAO:</strong> ${data.icao || "-"}</p>
      <p><strong>Callsign:</strong> ${data.callsign || "-"}</p>
      <p><strong>Country:</strong> ${data.country || "-"}</p>
      <p><strong>Type:</strong> ${data.type || "-"}</p>
      <p><strong>Status:</strong> ${data.status || "-"}</p>
      <p><strong>Hub:</strong> ${data.hub_code || "-"}</p>
    `;
  } catch (err) {
    console.error(err);
    output.innerHTML = "Server error. Please try again.";
  }
}
</script>
